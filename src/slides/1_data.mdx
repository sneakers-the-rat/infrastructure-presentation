import { Dataset } from '../components/dataset'
import { Peer } from '../components/peer'
import Swarm from '../components/swarm'

import funky from 'react-syntax-highlighter/dist/cjs/styles/prism/funky'

# Shared Data

(title slide)

* simplifying standardization
* peer to peer systems
* federated databases

---


<Heading marginLeft={'0px'} textAlign={'left'}>
  Decentralized Data
</Heading>
<Text fontSize={30} fontFamily={'monospace'} style={{ marginBottom: '12px' }}>
  To start, we need our data to be...
</Text>
<Box width={4 / 9}>
  <VerticalLinearStepper
      steps={[
        {
          title: 'Interoperable',
          body: 'Usable across experimental, analytical, and storage tools',
        },
        {
          title: 'Annotated',
          body:
              'Self-documented, requiring no additional information to understand',
        },
        {
          title: 'Portable',
          body:
              'All the pieces of a dataset are contained within! No "external files" loose\
          in our data directory. Large data like video, high-density electrophysiology \
          are supported by native, domain-specific compression.',
        },
        {
          title: 'Streamable',
          body:
              "Relatedly, the sub-pieces of a dataset need to be separable such that \
          someone doesn't need to download your massive exabyte dataset just to look \
          at the date it was collected",
        },
        {
          title: 'Discoverable',
          body:
              "Two kinds: findable by people who know what they're looking for (and what \
          they're looking for is your data, of course!), ie. searchable, and also as part \
          of a structured knowledge repository among other data of its type. More on this \
          in the federated p2p section...",
        },
      ]}
      finalText={''}
  />
  <Appear>
    <Paper
        style={{ backgroundColor: '#F5F5F5', marginTop: '24px', padding: '12px' }}
    >
      <Text
          fontSize={30}
          fontFamily={'monospace'}
          textAlign={'center'}
          marginTop={'1em'}
      >
        In other words, we need some kind of
      </Text>
      <Heading>~standardized format~</Heading>
      <Text fontSize={20} fontFamily={'monospace'} textAlign={'center'}>
        (who me? oh no who left all my data all over the floor)
      </Text>
    </Paper>
  </Appear>
</Box>

<svg width={1920} height={1080} className={'svg-fill'}>
  <Dataset
      name="data.exe"
      cols={[
        { name: 'apple', size: 3 },
        { name: 'banana', size: 5 },
        { name: 'peanut', size: 6 },
        { name: 'walrus', size: 2 },
        { name: 'fear', size: 4 },
      ]}
      position={[1750, 200]}
      orientation={90}
      scatter={{
        x: { scale: 30, lambda: 0.2, offset: 0 },
        y: { scale: 50, lambda: 0.5, offset: 50 },
        rotate: true,
      }}
      scale={2}
      outlines={true}
  />
</svg>

---

# NWB

Whats nwb

---


<Heading>Make It Easy!</Heading>
<Box width={2/3} marginLeft={'auto'} marginRight={'auto'}>
  <Text fontSize={30} fontFamily={'monospace'} style={{marginBottom:"12px"}} textAlign={"center"}>
    Standardizing data is *hard* and there are very few professional incentives to do it.
    Rather than just getting *mad* at people and *bullying* them into open science,
    it needs to be *easy*</Text>
  <Text fontSize={30} fontFamily={'monospace'} style={{marginBottom:"12px"}} textAlign={"center"}>
    Here's my take:
  </Text>
  <Link fontSize={20} href={"https://onice-conversion.readthedocs.org"} textAlign={"center"} fontFamily={'monospace'}>Docs at https://onice-conversion.readthedocs.org</Link>

</Box>

<Box width={2/3} marginLeft={'auto'} marginRight={'auto'}>
  <Text fontSize={20} fontFamily={'monospace'} style={{marginBottom:"12px"}} textAlign={"center"}>
    And ya and also rewarding, what do people get out of their labor? we'll get there.</Text>

</Box>



---
# p2p

Once we have our data standardized, now what?
Say this dot is u, and u are going to share some data
Wat do u do

(start by fading in peer, then bring in server, then add in other
ppl who want to download)

<svg width={1920} height={1080} className={'svg-fill'} id={"svg-root"}>
  <Peer
      name="jonny"
      position={[800, 500]}
  />
</svg>

---

# P2p

What if i told u the answer was to focus more on the sharing than the storage?
in a p2p system, everyone is the server.
Say i'm in a net with 5 of my buds, we all
tell each other what data we have.

sharing with my buds makes us all cooler

<svg width={1920} height={1080} className={'svg-fill'} id={"svg-root"}>
  <Swarm
      position={[1000,500]}
      radius={300}
      name={'swarm'}
      peers={{
        scale: 0.5,
        names: ['jonny', 'rumbly', 'santi','tito','timothy', 'apple', 'banana', 'kiwi', 'watermelon', 'macarena'],
        datasets:{
          n_range: [2,5],
          col_range:[3,6],
          size_range:[2,6],
          scale:0.1
        }}}
  />
</svg>

---

# p2p vs servers

comparison of server architecture and p2p quantitatively.

Notes: popup with more info

That p2p system is literally the most basic one. extend it in a bunch of ways

* Versioning
* Obligate Peers - making it always at least as fast as

---

# problems with p2p systems

* ppl freaking drop out!
* rare material can get lost if only one peer has it!
* make networks sad! (this one is just a QoS one so we can ignore that)

but what if i told u that there have been hundreds of thousands of people experimenting
with the culture of how to make a peer-to-peer data archival system
sustainable for decades? and those ppl are pirates?

here's a hint the answer is that *archives need communities* and
we will return to that later

---

# Federated systems

ok all fata abstractly floating computers, how do i get my dang mouse on it?

no shortage of scientific darabases, but basic tradeoff between generality and specificity
eg. embed IBL data site that's extremely specific, vs. fighsare which is v general but nonindexable

stuff from bietz et al

so let's try federated systems

---

# Federated systems

basic idea here is that we
a) conceptualize our data storage system as a *sharing* system first
b) choose who we share with and are *federated* with
c) allow different frontends to access our data in different ways and design tools around what they need

---

# federated databases

amit sheth and james larsen


---

fediverse and early wiki example

---



